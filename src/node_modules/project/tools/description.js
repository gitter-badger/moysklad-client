/**
 * description
 * Date: 16.06.14
 * Vitaliy V. Makeev (w.makeev@gmail.com)
 */

//TODO Обдумать!!!
var moment = require('moment');

var append = function (entity, message) {
    if (!message) return this;

    entity.description
        ? message = '\n' + message
        : entity.description = '';

    entity.description += message;

    return this;
};


var prepend = function (entity, message) {
    if (!message) return this;

    entity.description = entity.description
        ? message + '\n' + entity.description
        : message;

    return this;
};

//TODO format
function description (entity, format) {
    if (!entity) throw new Error('description: entity parameter not defined');

    /*var formatter = function (data) {
        return function () {
            return moment().format(format) + ' ' + data;
        }
    };*/

    var pub = {
        append: function (message) {
            return append.call(this, entity, message);
        },
        prepend: function (message) {
            return prepend.call(this, entity, message);
        },
        value: function () { return entity ? entity.description : null; }
    };

    return pub;
}

module.exports = description;