
// var Fiber

// try {
//     Fiber = require('fibers')
// } catch (e) {}

var callbackAdapter = function (err, data, callback, flowControl) {
    if (callback) {
        return callback(err, data);
    } else {
        switch(true) {
            // case Fiber && Fiber.current:
            // case flowControl === 'sync':
                
            case flowControl === 'async' && Promise:
                if (err) { return Promise.reject(err) }
                else { return Promise.resolve(data) }
            
            default:
                if (err) { throw err }
                else { return data }
        }        
    }
};

module.exports = callbackAdapter;
